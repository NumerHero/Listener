"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Util=function(){function e(){_classCallCheck(this,e),this.handlers={}}return _createClass(e,[{key:"publish",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];try{var i=function(){var r=t,s=t.RegAnalyse(e),i=s.ev,a=s.className;if(!t.isHas(i,a))return{v:void 0};if(a)t.handlers[i][a].forEach(function(e){return e.apply(r,n)});else{var l=!0,o=!1,u=void 0;try{for(var h,f=Object.keys(t.handlers[i])[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var c=h.value;t.handlers[i][c].forEach(function(e){return e.apply(r,n)})}}catch(e){o=!0,u=e}finally{try{!l&&f.return&&f.return()}finally{if(o)throw u}}}}();if("object"===("undefined"==typeof i?"undefined":_typeof(i)))return i.v}catch(e){throw new Error(e)}return this}},{key:"once",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.publish.apply(this,[e].concat(r)),this.unsubscribe(e)}},{key:"subscribe",value:function(e,t){this.isString(e);var r=this.RegAnalyse(e),n=r.ev,s=r.className;if(!n)throw new Error("listenerName must only combine with only character、number and _  ");if(/^default$/.test(s))throw new Error("default eventClass was binded !");return!(n in this.handlers)&&(this.handlers[n]={default:[]}),s?this.handlers[n][s]?this.handlers[n][s].push(t):this.handlers[n][s]=[t]:this.handlers[n].default.push(t),this}},{key:"unsubscribe",value:function(e){this.isString(e);var t=this.RegAnalyse(e),r=t.ev,n=t.className;if(this.isHas(r,n))return n?delete this.handlers[r][n]:delete this.handlers[r],this}},{key:"isHas",value:function(e,t){if(e in this.handlers&&(!t||t in this.handlers[e]))return!0;throw new Error("The Event didnt bind !")}},{key:"RegAnalyse",value:function(e){var t=/^(\w+)(\.(\w+))?$/.exec(e),r=t[1],n=t[3];return{className:n,ev:r}}},{key:"isString",value:function(e){if("string"!=typeof e)throw new Error("EventName must is a string !")}}]),e}();module.exports=Util,exports.default=Util;